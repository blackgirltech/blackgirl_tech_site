<div class="col">
  <%= form_for @donation, url: {action: "create"} do |f| %>
    <div class="form-row">
      <label for="card-element">
        Card number
      </label>
      <div id="card-element">
        <!-- a Stripe Element will be inserted here. -->
      </div>
      <label> Amount </label>
      <input name="amount">
      <label> Email </label>
      <% if current_member %>
        <%= text_field_tag(:email, "#{current_member.email}") %>
      <% else %>
        <input type="email" name="email">
      <% end %>
      <label> One Off </label>
      <input type="checkbox" name="one_off">
      <label> Regular </label>
      <input type="checkbox" name="regular">

      <!-- Used to display form errors -->
      <div id="card-errors" role="alert"></div>
      <% if current_member %>
        <%= hidden_field_tag(:member_id, "#{current_member.id}") %>
      <% end %>
    </div>
    <%= f.submit "Donate", class: "btn bg-green white hover-green hover-bg-white b--green mt-1 f3 fw2 col-md-6 offset-md-3"%>
  <% end %>
</div>

<% content_for :script do %>
  <script>
    initialiseStripe('<%=ENV['STRIPE_PUBLISHABLE_KEY']%>', 'new_donation')
  </script>
<% end %>
